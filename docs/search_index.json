[["index.html", "环境数据分析与可视化 前言", " 环境数据分析与可视化 谭巧国 2022-06-05 前言 本网站内容用于厦门大学环境与生态学院研究生课程“环境数据分析与可视化”的教学。内容在持续更新中。 "],["intro.html", "Chapter 1 R的基础知识 1.1 科学计算器 1.2 变量赋值 1.3 变量取名规则 1.4 变量类型 1.5 常用的数据类型 1.6 数据类型强制转化（coercing） 1.7 缺失值（NA）和无穷大（Inf） 1.8 ggplot作图 1.9 保存图片 1.10 保存图片 1.11 推荐阅读", " Chapter 1 R的基础知识 1.1 科学计算器 四则运算： (1 + 2 * 4)/3 - 1.3 # [1] 1.7 指数运算： 例如，100的0.5次方： 100^0.5 # [1] 10 对数运算： log(2) # [1] 0.6931472 注意这是自然对数，与excel里的表述不一样。若以10为底，需明确标注： log10(2) # [1] 0.30103 类似地，以2为底的对数是： log2(2) ## [1] 1 特殊的常数： e是自然对数的底，e=2.718…, exp(1) = e^1；用于指数函数 exp(1) ## [1] 2.718282 pi = 3.14159…圆周率 sin(pi/2) ## [1] 1 科学计数法，6.22*10^23，注意这里e不是自然对数的底 6.22e23 ## [1] 6.22e+23 绝对值 abs(-10) ## [1] 10 1.1.1 取整 round()函数取整原则：四舍六入五成双 round(2.3) ## [1] 2 round(2.6) ## [1] 3 round(2.5) ## [1] 2 round(3.5) ## [1] 4 floor(2.6) #向下取整 ## [1] 2 ceiling(2.3) #向上取整 ## [1] 3 trunc(2.3)#取整数部分 ## [1] 2 trunc(2.6) ## [1] 2 1.1.2 保留有效数字 原则：四舍六入五成双 round(pi, 2) #保留2位小数 ## [1] 3.14 round(pi, 3) #保留3位小数 ## [1] 3.142 signif(pi,2) #保留2位有效数字 ## [1] 3.1 signif(pi,3) #保留3位有效数字 ## [1] 3.14 1.1.3 常用运算符 符号 含义 + 加 - 减 * 乘 / 除 ^ 乘方 %/% 商 %% 余数 &gt; 大于 &gt;= 大于等于 = 等于 &lt; 小于 &lt;= 小于等于 == 等于 != 不等于 ! 非 &amp; 与 | 或 ~ 前者是后者的函数 &lt;- 向左赋值 (可读作“得到”) -&gt; 向右赋值 (可读作“得到”) $ 列表索引 : 创建序列 1.1.4 逻辑运算 5 &gt; 3 ## [1] TRUE 5 == 3 ## [1] FALSE 1:5 != 3 ## [1] TRUE TRUE FALSE TRUE TRUE 1:5 &gt; 2 &amp; 1:5 &lt;5 ## [1] FALSE FALSE TRUE TRUE FALSE 1:5 &lt;= 2 | 1:5 &gt;=4 ## [1] TRUE TRUE FALSE TRUE TRUE 注：1：5的是指包含“1，2，3，4，5”这5个自然数的向量 1.2 变量赋值 在R语言里，用符号”.red[&lt;-]“给变量赋值。它的功能和”=”几乎等同。但是用&lt;-是一种传统，我们最好遵守。 x1 = 12 x1 ## [1] 12 x2 &lt;- 23 x2 ## [1] 23 y &lt;- x1 + x2 y ## [1] 35 x1 + x2 -&gt; z z ## [1] 35 1.3 变量取名规则 变量名只能是字母、数字、点（.）、下划线（_）的组合 只能以字母或点开头；不能以数字、下划线开头 对字母大小写敏感，a和A是不同的变量 变量名不能含有空格：x_1, x.1都可以，但x 1不可以；推荐x_1形式的命名，理由是方便阅读，方便记忆 1.4 变量类型 变量 含义 integer 整数 numeric 实数 character 字符 logical 逻辑值(TRUE或FALSE) class(as.integer(1.2)) #将1.2转化为整数,并查看其类型 ## [1] &quot;integer&quot; class(pi) # pi = 3.1415...... ## [1] &quot;numeric&quot; class(&quot;Xiamen&quot;) ## [1] &quot;character&quot; class(c(TRUE,FALSE)) ## [1] &quot;logical&quot; 1.5 常用的数据类型 数据类型 说明 vector 向量，元素可以是数值、字符串、逻辑值 factor 因子，水平，是离散的，以整数vector形式储存，映射到字符串上 matrix 矩阵，所有元素的类型(numeric, character等)需一致 data frame 数据表，和matrix类似，但每列的类型可以不一致 list 清单，与vector类似，但每个元素的类型可以不一致，且可以是任何数据类型（例如numeric,data frame, list…) 1.6 数据类型强制转化（coercing） t_1 &lt;- c(&quot;1&quot;, &quot;2&quot;, &quot;3.4&quot;) #字符，无法进行计算 t_1 ## [1] &quot;1&quot; &quot;2&quot; &quot;3.4&quot; class(t_1) ## [1] &quot;character&quot; t_2 &lt;- as.numeric(t_1) #转化为数值，就可以计算了 t_2 ## [1] 1.0 2.0 3.4 class(t_2) ## [1] &quot;numeric&quot; t_3 &lt;- as.factor(t_2) #数值转化为因子，非常有用的功能，以后详述 t_3 ## [1] 1 2 3.4 ## Levels: 1 2 3.4 class(t_3) ## [1] &quot;factor&quot; 1.7 缺失值（NA）和无穷大（Inf） 实验数据经常会有缺失值，缺失值的处理对于数据分析非常重要。 .pull-left[] 1.7.1 修改为折线图 plot(x = d_CO2$time, y = d_CO2$CO2, type = &quot;l&quot;) 1.7.2 修改颜色设置 plot(x = d_CO2$time, y = d_CO2$CO2, type = &quot;l&quot;, col = &quot;red&quot;) .pull-right[ 1.7.3 修改坐标轴名称 plot(x = d_CO2$time, y = d_CO2$CO2, type = &quot;l&quot;, col = &quot;red&quot;, xlab = &quot;Year&quot;, ylab = expression(pCO[2]~&quot;(ppm)&quot;)) 1.8 ggplot作图 先对ggplot绘图有个简单印象，下次课我们深入学习。 library(ggplot2) #ggplot绘图 ggplot(d_CO2, aes(time, CO2))+ theme_bw()+ geom_line(color = &quot;red2&quot;)+ labs(x = &quot;Year&quot;, y = ~pCO[2]~(ppm)) ## Don&#39;t know how to automatically pick scale for object of type ts. Defaulting to continuous. ## Don&#39;t know how to automatically pick scale for object of type ts. Defaulting to continuous. #ggsave(&quot;pCO2.png&quot;, width=342/90, height=243/90, dpi=600) 1.9 保存图片 1.9.1 第一种方法 首先将图片赋值给变量p1。 library(ggplot2) p1 &lt;- ggplot(mpg, aes(displ, hwy))+ geom_point() 然后调用**`png()`**作图设备作图，并记得随手用**`dev.off()`**关闭作图设备（否则不出图）。变量**`p1`**夹在以上两行代码之间。完成操作后，你就能在工作文件夹里找到名称为“myplot_1.png”的图了。 ```r png(&quot;myplot_1.png&quot;, width=359/90*600, height=239/90*600, res=600) p1 dev.off() 1.10 保存图片 1.10.1 第二种方法 由于我们以后大多使用ggplot()作图，因此可以用ggplot2程序包中的ggsave()函数保存当前显示的图片（在RStudio右下面板中）。 library(ggplot2) ggplot(mpg, aes(displ, hwy))+ geom_point() ggsave(&quot;myplot_2.png&quot;, width=359/90, height=239/90, dpi=600) #png格式，位图 ggsave(&quot;myplot_2.pdf&quot;, width=359/90, height=239/90) #pdf格式，矢量图 完成以上操作，你就能在工作文件夹里找到名称为“myplot_2.png”“myplot_2.pdf”的图了。 如何设置合适的width和height? 需要一些技巧（我会操作演示）和审美能力。 1.11 推荐阅读 Crawley MJ. The R Book. 2nd ed. Chapter 2. Essentials of the R Language.pp 12-136. (有点枯燥，至少读1/3，读不完的之后的学习过程中还可以再回过头读。) "],["ggplot2作图入门.html", "Chapter 2 ggplot2作图入门", " Chapter 2 ggplot2作图入门 Here is a review of existing methods. "],["数据整理.html", "Chapter 3 数据整理 3.1 math example", " Chapter 3 数据整理 We describe our methods in this chapter. Math can be added in body using usual syntax like this 3.1 math example \\(p\\) is unknown but expected to be around 1/3. Standard error will be approximated \\[ SE = \\sqrt(\\frac{p(1-p)}{n}) \\approx \\sqrt{\\frac{1/3 (1 - 1/3)} {300}} = 0.027 \\] You can also use math in footnotes like this1. We will approximate standard error to 0.0272 where we mention \\(p = \\frac{a}{b}\\)↩︎ \\(p\\) is unknown but expected to be around 1/3. Standard error will be approximated \\[ SE = \\sqrt(\\frac{p(1-p)}{n}) \\approx \\sqrt{\\frac{1/3 (1 - 1/3)} {300}} = 0.027 \\]↩︎ "],["lubridate处理时间数据.html", "Chapter 4 lubridate处理时间数据 4.1 Example one 4.2 Example two", " Chapter 4 lubridate处理时间数据 Some significant applications are demonstrated in this chapter. 4.1 Example one 4.2 Example two "],["绘制地图.html", "Chapter 5 绘制地图", " Chapter 5 绘制地图 We have finished a nice book. "],["相关性分析.html", "Chapter 6 相关性分析", " Chapter 6 相关性分析 Here is a review of existing methods. "],["线性回归.html", "Chapter 7 线性回归", " Chapter 7 线性回归 Here is a review of existing methods. "],["logistic回归.html", "Chapter 8 Logistic回归", " Chapter 8 Logistic回归 Here is a review of existing methods. "],["t检验.html", "Chapter 9 t检验", " Chapter 9 t检验 Here is a review of existing methods. "],["单因素方差分析.html", "Chapter 10 单因素方差分析", " Chapter 10 单因素方差分析 Here is a review of existing methods. "],["多因素方差分析.html", "Chapter 11 多因素方差分析", " Chapter 11 多因素方差分析 Here is a review of existing methods. "],["协方差分析.html", "Chapter 12 协方差分析", " Chapter 12 协方差分析 Here is a review of existing methods. "],["主成分分析.html", "Chapter 13 主成分分析", " Chapter 13 主成分分析 Here is a review of existing methods. "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
